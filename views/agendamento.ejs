<%-include ("./partials/head.ejs")%>
<%-include ("./partials/nav.ejs")%>
<main>
    <div class="container">
        <div class="card mt-4">
            <div class="bg-dark text-white card-header">
                <h4 class="my-2">Selecione um de nossos Barber</h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-sm-6 col-md-4">
                        <div class="input-group">
                        <input class="me-2" type="radio" name="barber" <%=(barberId == undefined || barberId == 0)?'checked':''%> value="0" id="examplradio1">
                        <img src="/img/user.jpg" class="img-fluid" height="40px" width="40px" alt="">
                        <span class="ms-2 px-1">
                            <label class="fw-bold">Todos</label><br>
                            <label for="" class="text-muted"></label>
                        </span>
                        </div>
                    </div>
                    <%barbers.forEach(barber =>{%>
                        <div class="col-sm-6 col-md-4">
                            <div class="input-group">
                            <input class="me-2" type="radio" name="barber" <%=(barberId != undefined && barberId == barber.id)?'checked':''%> value="<%=barber.id%>" id="examplradio1">
                            <img src="/img/user.jpg" class="img-fluid" height="40px" width="40px" alt="">
                            <span class="ms-2 px-1">
                                <label class="fw-bold"><%=barber.apelido%></label><br>
                                <label for="" class="text-muted">@<%=barber.ig%></label>
                            </span>
                            </div>
                        </div>
                    <%})%>
                </div>
            </div>
        </div>
        <nav aria-label="Page navigation">
            <ul class="pagination justify-content-end mt-5">
              <li class="page-item disabled">
                <a class="page-link"><span data-feather="arrow-left"></span> Anterior</a>
              </li>
              <li class="page-item">
                <a class="page-link" href="#">Proximo <span data-feather="arrow-right"></span></a>
              </li>
            </ul>
        </nav>
        <input type="hidden" name="data" id="dataSelecionada" value="<%=data%>">
       <table class="table table-borderless table-hover mt-3" id="tableAgend">
           <thead>
               <tr id="tableDias">
                    <th></th>
                   <th></th>
                   <th></th>
                   <th></th>
                   <th></th>
                   <th></th>
                   <th></th>
                   <th></th>
               </tr>
           </thead>
           <tbody id="tableHorarios">
                <!-- <tr>
                   <td> 09:00 </td>
                   <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                   <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                   <td> <button class="btn btn-outline-success">Disponivel</button> </td>
               </tr>

                <tr>
                    <td> 10:00 </td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                </tr>

                <tr>
                    <td> 11:00 </td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                </tr>

                <tr>
                    <td> 12:00</td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                </tr>

                <tr>
                    <td> 13:00 </td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                </tr>
                <tr>
                    <td> 14:00 </td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                    <td> <button class="btn btn-outline-success">Disponivel</button> </td>
                </tr> -->
           </tbody>
       </table>
    </div>
</main>
<script>
    window.addEventListener('load',listarHoratios())

    function listarHoratios() {
        var tableDias = document.getElementById("tableDias")
        var tableHorarios = document.getElementById("tableHorarios")
        var dataSelecionada = document.getElementById("dataSelecionada")

        axios.get('/api/horarios/listar').then(resp =>{
            var datas = resp.data.datas
            var horarios = resp.data.horarios
            //AQUIII ESQUECXENÃO AGORA É O FOREACH HORARIOS

            var rowsDatas = `<th></th>`
            var rowsHoras = ``
            datas.forEach(data => {
                rowsDatas += `<th id="${data}" class="text-center ${(data == dataSelecionada.value)?'bg-success text-white':''}">${data}</th>`
            });
            tableDias.innerHTML =  rowsDatas
            horarios.forEach(hora =>{
                rowsHoras += `<tr><td class="bg-dark text-white">${hora}</td></tr>`
            })
            tableHorarios.innerHTML = rowsHoras

           var trList = document.querySelectorAll('#tableHorarios tr');
                trList.forEach(tr => {
                    for(index = 0;index< 7 ;index++){
                        var td = document.createElement("td")
                        td.classList.add('text-center')
                        
                    }
                    
                });
         })

    }
</script>
<%-include ("./partials/scripts.ejs")%>
